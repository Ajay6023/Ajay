---
layout: post
title: First Demo Post
date: 2020-07-10 13:32:20 +0300
description: You'll find this post in your `_posts` directory. Go ahead and edit it and re-build the site to see your changes. # Add post description (optional)
image: # Add image post (optional)
fig-caption: # Add figcaption (optional)
tags: [Holidays, Hawaii]
---


<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="https://gmpg.org/xfn/11">
		<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>gokulvasanblog</title>
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.pubmine.com' />
<link rel='dns-prefetch' href='//x.bidswitch.net' />
<link rel='dns-prefetch' href='//static.criteo.net' />
<link rel='dns-prefetch' href='//ib.adnxs.com' />
<link rel='dns-prefetch' href='//aax.amazon-adsystem.com' />
<link rel='dns-prefetch' href='//bidder.criteo.com' />
<link rel='dns-prefetch' href='//cas.criteo.com' />
<link rel='dns-prefetch' href='//gum.criteo.com' />
<link rel='dns-prefetch' href='//ads.pubmatic.com' />
<link rel='dns-prefetch' href='//gads.pubmatic.com' />
<link rel='dns-prefetch' href='//tpc.googlesyndication.com' />
<link rel='dns-prefetch' href='//ad.doubleclick.net' />
<link rel='dns-prefetch' href='//googleads.g.doubleclick.net' />
<link rel='dns-prefetch' href='//www.googletagservices.com' />
<link rel='dns-prefetch' href='//cdn.switchadhub.com' />
<link rel='dns-prefetch' href='//delivery.g.switchadhub.com' />
<link rel='dns-prefetch' href='//delivery.swid.switchadhub.com' />
<link rel='dns-prefetch' href='//a.teads.tv' />
<link rel='dns-prefetch' href='//prebid.media.net' />
<link rel='dns-prefetch' href='//adserver-us.adtech.advertising.com' />
<link rel='dns-prefetch' href='//fastlane.rubiconproject.com' />
<link rel='dns-prefetch' href='//prebid-server.rubiconproject.com' />
<link rel='dns-prefetch' href='//hb-api.omnitagjs.com' />
<link rel='dns-prefetch' href='//mtrx.go.sonobi.com' />
<link rel='dns-prefetch' href='//apex.go.sonobi.com' />
<link rel='dns-prefetch' href='//u.openx.net' />
<link href='https://fonts.gstatic.com' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="gokulvasanblog &raquo; Feed" href="https://gokulvasanblog.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="gokulvasanblog &raquo; Comments Feed" href="https://gokulvasanblog.wordpress.com/comments/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script>
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s0.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1612197847h&ver=5.6.1"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style>
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='all-css-0-1' href='https://s0.wp.com/_static/??-eJytktlOwzAQRX8Ix0ogSHlAfIuXkXHxJs+4qf8eu4RFaVX6wIul8dxzNRtfE1MxEATivrDkirEB+ZpU9Ay9dVB30aAQH/h1TMUMjN7AA7a0T4I4rU1T0Z4IINxigyB7BCZ0s8Ff4QUjXTQ/hcasO2JclMJdaL9kprRQQjasl8iPy7AMj1wW63T3U+/MWZlFrhypOvgHn/MU7vA5U8gPQEl0XNRYiJls9d2l7Cxym1ww+Aeu4oZNw9xa0Bbp+49dR/eL3jbcFB60FeBax4FuYZ+HJGXKgMja623x28F07tW/jM/jNI/L/DQdPgC9hvox?cssminify=yes' type='text/css' media='all' />
<style id='wp-block-library-inline-css'>
.has-text-align-justify {
	text-align:justify;
}
</style>
<link crossorigin="anonymous" rel='stylesheet' id='twentysixteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&#038;subset=latin%2Clatin-ext&#038;display=fallback' media='all' />
<link rel='stylesheet' id='all-css-2-1' href='https://s0.wp.com/_static/??-eJyNjUsKgDAMRC9kjeIHXYh3sYRabWMxKertLa7cCO6GN28YOILSGwmSgI8quGgsMRgk3G0qPmKumTN4bWVGjwwhTiBHAhfbUxAJWC6H//UkwuQ2vT4Xox/Ktuj7qu6qZrkBcrxAvg==?cssminify=yes' type='text/css' media='all' />
<!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='https://s0.wp.com/wp-content/themes/pub/twentysixteen/css/ie.css?m=1448353951h&#038;ver=20170530' media='all' />
<![endif]-->
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='https://s0.wp.com/wp-content/themes/pub/twentysixteen/css/ie8.css?m=1493067000h&#038;ver=20170530' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='https://s0.wp.com/wp-content/themes/pub/twentysixteen/css/ie7.css?m=1448353951h&#038;ver=20170530' media='all' />
<![endif]-->
<link rel='stylesheet' id='all-css-8-1' href='https://s0.wp.com/_static/??-eJx9jkEOwjAMBD9EMEUqKgfEW9JgQsCJo9pR2t8TEBJw6W3H1qwWajaOk2JS0BtGFMhlBK3tsEiYFTGBEwHRhdDU7DhuG2/gR4zFZCo+JIEaLh5VAEv78iOgIVtBMWayip+atQKPbIid1cDpD8yVbJjW1AlHYt+ify/+4ks6x1PXH3fdod8Pw/0Jx6lcfw==?cssminify=yes' type='text/css' media='all' />
<style id='jetpack-global-styles-frontend-style-inline-css'>
:root { --font-headings: unset; --font-base: unset; --font-headings-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; --font-base-default: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;}
</style>
<link rel='stylesheet' id='all-css-10-1' href='https://s0.wp.com/wp-content/themes/h4/global.css?m=1420737423h&cssminify=yes' type='text/css' media='all' />
<script id='wpcom-actionbar-placeholder-js-extra'>
var actionbardata = {"siteID":"113716065","siteName":"gokulvasanblog","siteURL":"http:\/\/gokulvasanblog.wordpress.com","icon":"<img alt='' src='https:\/\/s0.wp.com\/i\/logo\/wpcom-gray-white.png' class='avatar avatar-50' height='50' width='50' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/twentysixteen","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fgokulvasanblog.wordpress.com%2F2017%2F04%2F15%2Fempathizing-mammoths-brain-determining-watermark-in-linux%2F&signup_flow=account","themeURL":"https:\/\/wordpress.com\/theme\/twentysixteen\/","xhrURL":"https:\/\/gokulvasanblog.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"719ca3eb80","isSingular":"","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"ca8f548b10\" \/>","referer":"https:\/\/gokulvasanblog.wordpress.com\/","canFollow":"1","feedID":"50587337","statusMessage":"","customizeLink":"https:\/\/gokulvasanblog.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fgokulvasanblog.wordpress.com%2F","i18n":{"view":"View site","follow":"Follow","following":"Following","edit":"Edit","login":"Log in","signup":"Sign up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: Twenty Sixteen","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/read\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editSubs":"Manage subscriptions","viewReader":"View site in Reader","viewReadPost":"View post in Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/wordpress.com\/log-in?redirect_to=https%3A%2F%2Fgokulvasanblog.wordpress.com%2F2017%2F04%2F15%2Fempathizing-mammoths-brain-determining-watermark-in-linux%2F&signup_flow=account\">Log in now.<\/a>","stats":"Stats"}};
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyFj9EOgjAMRX/IsYAR44PxWwZU6LJ1k3Ygf+8wYtQXn5r2ntOmeo6qDSRAoi3rGFg8MJseCss7/Z360KADlRjGDJAopGvYOKTWpQ54Be0twbi8SuGR/kLKYz8agU94u+yTii71SKzJCE6gTPfc8O5+DRkgf6FjarTMebAw3gWAVmkQ7w5ZuPhzWZfV/lid6so+AG/AYZk='></script>
<link rel='stylesheet' id='all-css-0-2' href='https://s0.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1530132353h&cssminify=yes' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s0.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563h&#038;ver=20110606' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://gokulvasanblog.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s0.wp.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress.com" />
<link rel='shortlink' href='https://wp.me/7H8K5' />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website" />
<meta property="og:title" content="gokulvasanblog" />
<meta property="og:url" content="https://gokulvasanblog.wordpress.com/" />
<meta property="og:site_name" content="gokulvasanblog" />
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta property="fb:app_id" content="249643311490" />

<!-- End Jetpack Open Graph Tags -->
<link rel="shortcut icon" type="image/x-icon" href="https://s0.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="https://s0.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon" href="https://s0.wp.com/i/webclip.png" />
<link rel="search" type="application/opensearchdescription+xml" href="https://gokulvasanblog.wordpress.com/osd.xml" title="gokulvasanblog" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
<meta name="application-name" content="gokulvasanblog" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://gokulvasanblog.wordpress.com/feed/;icon-uri=https://s0.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s0.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s0.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s0.wp.com/i/favicon.ico" />		<script type="text/javascript">

			window.doNotSellCallback = function() {

				var linkElements = [
					'a[href="https://wordpress.com/?ref=footer_blog"]',
					'a[href="https://wordpress.com/?ref=footer_website"]',
					'a[href="https://wordpress.com/?ref=vertical_footer"]',
					'a[href^="https://wordpress.com/?ref=footer_segment_"]',
				].join(',');

				var dnsLink = document.createElement( 'a' );
				dnsLink.href = 'https://wordpress.com/advertising-program-optout';
				dnsLink.classList.add( 'do-not-sell-link' );
				dnsLink.rel = 'nofollow';
				dnsLink.style.marginLeft = '0.5em';
				dnsLink.textContent = 'Do Not Sell My Personal Information';

				var creditLinks = document.querySelectorAll( linkElements );

				if ( 0 === creditLinks.length ) {
					return false;
				}

				Array.prototype.forEach.call( creditLinks, function( el ) {
					el.insertAdjacentElement( 'afterend', dnsLink );
				});

				return true;
			};

		</script>
				<script type="text/javascript">
		function __ATA_CC() {var v = document.cookie.match('(^|;) ?personalized-ads-consent=([^;]*)(;|$)');return v ? 1 : 0;}
		var __ATA_PP = { pt: 0, ht: 0, tn: 'twentysixteen', amp: false, siteid: 8982, blogid: 113716065, consent: __ATA_CC()   };
		var __ATA = __ATA || {};
		__ATA.cmd = __ATA.cmd || [];
		__ATA.criteo = __ATA.criteo || {};
		__ATA.criteo.cmd = __ATA.criteo.cmd || [];
		
		</script>
		<script type="text/javascript">
		(function(){var g=Date.now||function(){return+new Date};function h(a,b){a:{for(var c=a.length,d="string"==typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:"string"==typeof a?a.charAt(b):a[b]};function k(a,b,c){c=null!=c?"="+encodeURIComponent(String(c)):"";if(b+=c){c=a.indexOf("#");0>c&&(c=a.length);var d=a.indexOf("?");if(0>d||d>c){d=c;var e=""}else e=a.substring(d+1,c);a=[a.substr(0,d),e,a.substr(c)];c=a[1];a[1]=b?c?c+"&"+b:b:c;a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a};var l=0;function m(a,b){var c=document.createElement("script");c.src=a;c.onload=function(){b&&b(void 0)};c.onerror=function(){b&&b("error")};a=document.getElementsByTagName("head");var d;a&&0!==a.length?d=a[0]:d=document.documentElement;d.appendChild(c)}function n(a){var b=void 0===b?document.cookie:b;return(b=h(b.split("; "),function(c){return-1!=c.indexOf(a+"=")}))?b.split("=")[1]:""}function p(a){return"string"==typeof a&&0<a.length}
		function r(a,b,c){b=void 0===b?"":b;c=void 0===c?".":c;var d=[];Object.keys(a).forEach(function(e){var f=a[e],q=typeof f;"object"==q&&null!=f||"function"==q?d.push(r(f,b+e+c)):null!==f&&void 0!==f&&(e=encodeURIComponent(b+e),d.push(e+"="+encodeURIComponent(f)))});return d.filter(p).join("&")}function t(a,b){a||((window.__ATA||{}).config=b.c,m(b.url))}var u=Math.floor(1E13*Math.random()),v=window.__ATA||{};window.__ATA=v;window.__ATA.cmd=v.cmd||[];v.rid=u;v.createdAt=g();var w=window.__ATA||{},x="s.pubmine.com";
		w&&w.serverDomain&&(x=w.serverDomain);var y="//"+x+"/conf",z=window.top===window,A=window.__ATA_PP&&window.__ATA_PP.gdpr_applies,B="boolean"===typeof A?Number(A):null,C=window.__ATA_PP||null,D=z?document.referrer?document.referrer:null:null,E=z?window.location.href:document.referrer?document.referrer:null,F,G=n("__ATA_tuuid");F=G?G:null;var H=window.innerWidth+"x"+window.innerHeight,I=n("usprivacy"),J=r({gdpr:B,pp:C,rid:u,src:D,ref:E,tuuid:F,vp:H,us_privacy:I?I:null},"",".");
		(function(a){var b=void 0===b?"cb":b;l++;var c="callback__"+g().toString(36)+"_"+l.toString(36);a=k(a,b,c);window[c]=function(d){t(void 0,d)};m(a,function(d){d&&t(d)})})(y+"?"+J);}).call(this);
		</script><script type="text/javascript">
	window.google_analytics_uacct = "UA-52447-2";
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_gat._anonymizeIp']);
	_gaq.push(['_setDomainName', 'wordpress.com']);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script>
</head>

<body class="home blog wp-embed-responsive customizer-styles-applied hfeed highlander-enabled highlander-light">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner">
			<div class="site-header-main">
				<div class="site-branding">
					<a href="https://gokulvasanblog.wordpress.com/" class="site-logo-link" rel="home" itemprop="url"></a>
											<h1 class="site-title"><a href="https://gokulvasanblog.wordpress.com/" rel="home">gokulvasanblog</a></h1>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
								<div class="menu-primary-container"><ul id="menu-primary" class="primary-menu"><li id="menu-item-8" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-8"><a href="/" aria-current="page">Home</a></li>
<li id="menu-item-9" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9"><a href="https://gokulvasanblog.wordpress.com/about/">About</a></li>
<li id="menu-item-10" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10"><a href="https://gokulvasanblog.wordpress.com/contact/">Contact</a></li>
</ul></div>							</nav><!-- .main-navigation -->
						
													<nav id="social-navigation" class="social-navigation" role="navigation" aria-label="Social Links Menu">
								<div class="menu-social-links-container"><ul id="menu-social-links" class="social-links-menu"><li id="menu-item-11" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11"><a href="https://twitter.com/"><span class="screen-reader-text">Twitter</span></a></li>
<li id="menu-item-12" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12"><a href="https://www.facebook.com/"><span class="screen-reader-text">Facebook</span></a></li>
<li id="menu-item-13" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13"><a href="http://plus.google.com"><span class="screen-reader-text">Google+</span></a></li>
<li id="menu-item-14" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14"><a href="http://github.com"><span class="screen-reader-text">GitHub</span></a></li>
<li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15"><a href="http://wordpress.com"><span class="screen-reader-text">WordPress.com</span></a></li>
</ul></div>							</nav><!-- .social-navigation -->
											</div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

					</header><!-- .site-header -->

		<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			
			
<article id="post-1523" class="post-1523 post type-post status-publish format-standard hentry category-linux category-memory-management category-scanrate category-uncategorized">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="https://gokulvasanblog.wordpress.com/2017/04/15/empathizing-mammoths-brain-determining-watermark-in-linux/" rel="bookmark">Empathizing Mammoths Brain: Determining Watermark in&nbsp;Linux</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>Watermark determines the <a href="https://gokulvasanblog.wordpress.com/2016/11/14/empathising-mammoths-mentality-a-study-on-linux-memory-management/" target="_blank" rel="noopener">scan rate policy </a>of the memory management.</p>
<p>Linux kernel as described in my previous writing has 3 major watermarks, High, Min and Low.  This blog is a brief view of the watermark calculation in the Linux system.</p>
<p><strong>1. Use variable from admin window <em>/proc/sys/vm/min_free_kbytes</em></strong></p>
<p>Converts kbytes unit to page unit.</p>
<p><em>pages_min</em> = min_free_kbytes &gt;&gt; (PAGE_SHIFT &#8211; 10);</p>
<p><strong>2. Calculate total managed pages in each zone except <a href="https://linux-mm.org/HighMemory" target="_blank" rel="noopener">highmem </a> zone( if it exists )</strong></p>
<pre class="brush: cpp; title: ; notranslate" title="">
for_each_zone(zone) {
       if(!is_highmem(zone))
            lowmem_pages += zone-&gt;managed_pages;
}

</pre>
<p><strong><span style="text-decoration:underline;"> For Each zone calculate the following</span></strong><br />
<strong>3. Calculate fraction for each zone&#8217;s pages_min with respect to lowmem_pages.</strong><br />
<strong>tmp</strong>= ( pages_min / lowmem_pages ) * zone-&gt;managed_pages.</p>
<ul>
<li><em>Managed_pages</em> are total available page count in a zone that could be used for allocation.</li>
</ul>
<p><strong>4. Calculate WMARK_MIN for HIGHMEM using following calculation:</strong><br />
min_pages = zone-&gt;managed_pages  /  1024<br />
min_pages = <strong>MIN</strong>( <strong>MAX</strong>(min_pages, SWAP_CLUSTER_MAX), 128)</p>
<p><strong>5. Else, simply use the <em>tmp </em>variable as min_pages watermark count.</strong></p>
<p>6. <strong>Calculate the distance for the rest of the watermarks.</strong><br />
Its the fraction of managed_pages by 10000, scaled by <strong>watermark_scale_factor = 10</strong><br />
fraction = ( zone-&gt;managed_pages / 10000 )  * watermark_scale_factor<br />
distance = <strong>MAX</strong>( tmp &gt;&gt; 2,  fraction);</p>
<p><strong>7. Assign watermarks</strong><br />
zone-&gt;watermark[WMARK_MIN] = min_pages;<br />
zone-&gt;watermark[WMARK_LOW] = min_pages + distance;<br />
zone-&gt;watermark[WMARK_HIGH] = min_pages + distance * 2;</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://0.gravatar.com/avatar/9d9f3213adef534abe85da1cff3d4596?s=49&#038;d=identicon&#038;r=G' class='avatar avatar-49' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://gokulvasanblog.wordpress.com/author/gokulvasanblog/">gokulvasanblog</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://gokulvasanblog.wordpress.com/2017/04/15/empathizing-mammoths-brain-determining-watermark-in-linux/" rel="bookmark"><time class="entry-date published" datetime="2017-04-15T17:09:04+00:00">April 15, 2017</time><time class="updated" datetime="2017-07-13T15:57:27+00:00">July 13, 2017</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://gokulvasanblog.wordpress.com/tag/linux/" rel="category tag">linux</a>, <a href="https://gokulvasanblog.wordpress.com/category/linux/memory-management/" rel="category tag">Memory Management</a>, <a href="https://gokulvasanblog.wordpress.com/category/linux/memory-management/scanrate/" rel="category tag">ScanRate</a>, <a href="https://gokulvasanblog.wordpress.com/category/uncategorized/" rel="category tag">Uncategorized</a></span><span class="comments-link"><a href="https://gokulvasanblog.wordpress.com/2017/04/15/empathizing-mammoths-brain-determining-watermark-in-linux/#respond">Leave a comment<span class="screen-reader-text"> on Empathizing Mammoths Brain: Determining Watermark in&nbsp;Linux</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-1523 -->

<article id="post--1337" class="post--1337 post type-post status-publish format-standard hentry">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="https://gokulvasanblog.wordpress.com/2020/10/30/" rel="bookmark"><span class="native-ad-marker top left TwentySixteen"><span>Sponsored Post</span></span>			<div class="native-about">
				<a class="native-about-click" href="#" rel="nofollow">
					<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img" aria-hidden="true" focusable="false"><path d="M11 13h2v-2h-2v2zm-6 0h2v-2H5v2zm12-2v2h2v-2h-2z"></path></svg>
					<span class="screen-reader-text">Sponsored Post Menu</span>
				</a>
				<div class="native-about-content">
					<ul>
						<li><a href="https://wordpress.com/support/native-sponsored-posts/" rel="nofollow">More Info</a></li>
						
					</ul>
				</div>
			</div><a data-tracks-railcar="@L@$^V^m8)%h" class="native-source-link" href="http://en.blog.wordpress.com/2020/10/30/learn-from-the-experts-create-a-successful-blog-with-our-brand-new-course/?utm_source=native&#038;utm_medium=native_frontpage&#038;utm_campaign=native_mvp" rel="nofollow">Learn from the experts: Create a successful blog with our brand new course</a><span class="native-ad-sponsor left"><a data-tracks-railcar="@L@$^V^m8)%h" class="native-source-link" href="https://en.blog.wordpress.com">The WordPress.com&nbsp;Blog</a></span></a></h2>	</header><!-- .entry-header -->

				<div class="entry-summary">
				<p>Are you new to blogging, and do you want step-by-step guidance on how to publish and grow your blog? Learn more about our new Blogging for Beginners course and get 50% off through December 10th.</p>
			</div><!-- .entry-summary -->
			
	
	<div class="entry-content">
		<p><img class="native-ad-featured-image" src="https://en-blog.files.wordpress.com/2020/10/courses-feature-image-3402x.jpg?w=1200" /></p>
<p>WordPress.com is excited to announce our newest offering: a <a data-tracks-railcar="@L@$^V^m8)%h" class="native-source-link" href="https://wpcourses.com/?utm_source=blog&amp;utm_medium=organic_social_media&amp;utm_campaign=launch_2020&amp;flags=a8c-analytics.on,ad-tracking,google-analytics&amp;ga_optimize=on" rel="nofollow">course just for beginning bloggers</a> where youâ€™ll learn everything you need to know about blogging from the most trusted experts in the industry. We have helped millions of blogs get up and running, we know what works, and we want you to to know everything we know. This course provides all the fundamental skills and inspiration you need to get your blog started, an interactive community forum, and content updated annually.
</p><div class="wp-block-button is-style-fill">
	<a data-tracks-railcar="@L@$^V^m8)%h" class="native-source-link wp-block-button__link has-white-color has-vivid-cyan-blue-background-color has-text-color has-background" href="https://wpcourses.com/?utm_source=blog&amp;utm_medium=organic_social_media&amp;utm_campaign=launch_2020&amp;flags=a8c-analytics.on,ad-tracking,google-analytics&amp;ga_optimize=on" rel="nofollow">
		Register now
	</a>
</div>			<style type="text/css">
			.post--1337 .entry-footer,
			.post--1337 .entry-meta,
			.post--1337 .entry-links,
			.post--1337 .comments-link,
			.post--1337 .post-info,
			.post--1337 .byline,
			.post--1337 .post-meta,
			.post--1337 #jp-post-flair,
			.post--1337 .cat-links {
				display: none !important;
			}

			.post--1337 .entry-title {
				pointer-events: none;
			}
			.native-source-link, .native-about {
				pointer-events: auto;
			}
			</style>	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://2.gravatar.com/avatar/55deea8a6060dc1c65fbdbd2adecd187?s=49&#038;d=identicon&#038;r=G' class='avatar avatar-49' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://gokulvasanblog.wordpress.com/author/selenadj/">Selena Jackson</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://gokulvasanblog.wordpress.com/2020/10/30/" rel="bookmark"><time class="entry-date published" datetime="2020-10-30T16:04:00+00:00">October 30, 2020</time><time class="updated" datetime=""></time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="" rel="category tag">Promoted Post</a></span><span class="comments-link"><a href="https://gokulvasanblog.wordpress.com/2020/10/30/#respond">Leave a comment<span class="screen-reader-text"> on Learn from the experts: Create a successful blog with our brand new&nbsp;course</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post--1337 -->

<article id="post-893" class="post-893 post type-post status-publish format-standard hentry category-linux category-memory-management category-scanrate">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="https://gokulvasanblog.wordpress.com/2016/11/14/empathising-mammoths-mentality-a-study-on-linux-memory-management/" rel="bookmark">Empathising mammoth&#8217;s mentality: A study on Linux Memory&nbsp;Management.</a></h2>	</header><!-- .entry-header -->

	
	
	<div class="entry-content">
		<p>This series of articles tries a hand on hand analysis of memory management policies accommodated in acclaimed Unix-like operating systems like OpenSolaris, FreeBSD with Linux.</p>
<p>Memory management conventionally  has three major policies.</p>
<ol>
<li><strong>Fetch Policy:</strong> When to fetch a page from auxiliary memory.</li>
<li><strong>Placement Policy:</strong> Where to place the fetched page in main memory.</li>
<li><strong>Replacement Policy:</strong> Which page to replace in case of memory shortage.</li>
</ol>
<p>The mentioned policies are well studied and reasoned( Though I will write on this as well), nevertheless another policy which directly impacts the performance of a system is <strong>scan rate policy</strong>.</p>
<p>Rest of this specific work will focus on this policy and its approach in different operating system.</p>
<p><span style="color:#800000;">What is a scan rate policy?</span></p>
<p>Operating systems keeps updating the position of the allocated pages in their corresponding list based on its access frequency and other parameters. This enables the replacement policy to fetch the pages based on the position for replacement. Scanning through the entire list of allocated pages and updating the position of every page each time is an expensive operation. To avoid such a colossal expense, operating systems will only scan a portion of the list at a given moment of time and updates the corresponding page&#8217;s position. <em>The policy that decides on the fraction to scan at a given instance of time is termed as scan rate policy</em>.</p>
<p><strong>Generalities in the model</strong>. Habitually on nearing a particular distance to exhaustion, the system starts a kernel level daemon, that runs in concurrence with other processes, termed either as pageout daemon( OpenSolaris and OpenBSD) or Kswapd daemon( Linux); Albeit the name of the process changes based on platform implementation, its intention remains the same .i.e., <em>scan a certain amount of pages, apply the desired replacement policy and evict a set of pages to leeway for the current memory need.</em> The free list of pages might have many waypoints in between the list called watermark. In Common, watermark decides on when to start the scan, rate of scan, number of times to scan, amount of processor utilisation page scanner can take( called CPU CAP), amount of I/O utilisation page scanner can use( called I/O CAP), etc., but the mentioned set varies both in implementation and inclusion based on the platform of implementation. Extensively, many operating systems quantify the measure of watermarks in page numbers.</p>
<p><strong><span style="color:#800000;">Implementation In OpenSolaris:</span></strong></p>
<p>OpenSolaris uses watermark based policy, i.e., scan rate policy changes based on the watermark .</p>
<p><strong>Model.</strong> OpenSolaris have three major watermarks, namely <em>lotsfree, desmem, minfree.</em> The system has two different scan policies called slow scan and fast scan. The system also have two different rate at which the scanning will happen per second, i.e., 4times/second and 100times/second. Further, Solaris restricts the CPU utilisation of the page scanner between 4( min_percent_cpu) to 80( max_percent_cpu) percent( Used as a scaling factor) and the I/O is  capped at either 40 or 60 IO/second( maxpgio ), but this restriction is based on the formulae <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B%28diskRPM+%2A+2%29%7D%7B3%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{(diskRPM * 2)}{3}" title="&#92;frac{(diskRPM * 2)}{3}" class="latex" />, Intuitively it means <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B2%7D%7B3%7D+&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{2}{3} " title="&#92;frac{2}{3} " class="latex" /> busy on disk arm is all that is tolerable for paging.</p>
<p>By default lotsfree is <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B64%7D+&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{1}{64} " title="&#92;frac{1}{64} " class="latex" /> of total memory, desmem is <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B2%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{1}{2}" title="&#92;frac{1}{2}" class="latex" /> of lotsfree and minfree is <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B2%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{1}{2}" title="&#92;frac{1}{2}" class="latex" /> of desmem.  Fast scan is scaled to <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7BTotal+Memory%7D%7B2%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{Total Memory}{2}" title="&#92;frac{Total Memory}{2}" class="latex" /> and slow scan is hardcoded with 100. The whole of this  value initialisation is done  in function <a href="http://fxr.watson.org/fxr/source/common/os/vm_pageout.c?v=OPENSOLARIS;im=3#L214" target="_blank" rel="noopener">setupclock</a>.</p>
<p>Another watermark worth mentioning is <em>throttlefree</em>. This watermark in general is equated with minfree.</p>
<p><figure data-shortcode="caption" id="attachment_1486" aria-describedby="caption-attachment-1486" style="width: 427px" class="wp-caption aligncenter"><img loading="lazy" data-attachment-id="1486" data-permalink="https://gokulvasanblog.wordpress.com/2016/11/14/empathising-mammoths-mentality-a-study-on-linux-memory-management/solarisscanrate-3/" data-orig-file="https://gokulvasanblog.files.wordpress.com/2016/11/solarisscanrate2.png" data-orig-size="427,341" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="solarisscanrate" data-image-description="" data-medium-file="https://gokulvasanblog.files.wordpress.com/2016/11/solarisscanrate2.png?w=300" data-large-file="https://gokulvasanblog.files.wordpress.com/2016/11/solarisscanrate2.png?w=427" class="alignnone size-full wp-image-1486" src="https://gokulvasanblog.files.wordpress.com/2016/11/solarisscanrate2.png" alt="SolarisScanRate.png" width="427" height="341" srcset="https://gokulvasanblog.files.wordpress.com/2016/11/solarisscanrate2.png 427w, https://gokulvasanblog.files.wordpress.com/2016/11/solarisscanrate2.png?w=150&amp;h=120 150w, https://gokulvasanblog.files.wordpress.com/2016/11/solarisscanrate2.png?w=300&amp;h=240 300w" sizes="(max-width: 427px) 85vw, 427px" /><figcaption id="caption-attachment-1486" class="wp-caption-text"><strong>Fig1:</strong> OpenSolaris Scan Rate With Respect to Watermark</figcaption></figure></p>
<p>&nbsp;</p>
<p><strong>Policy. </strong>Once memory reaches lotsfree watermark, pageout daemon kickstarts. The amount of page to scan is determined by the formulae:</p>
<p><img src="https://s0.wp.com/latex.php?latex=ScanRate%3D+%5B+%5B+%5Cfrac%7Blotsfree+-+freeMem%7D%7Blotsfree%7D%5D+%2A+fastscan+%2B+%5B+%5Cfrac%7BfreeMem%7D%7Blotsfree%7D+%2A+slowscan%5D+%5D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="ScanRate= [ [ &#92;frac{lotsfree - freeMem}{lotsfree}] * fastscan + [ &#92;frac{freeMem}{lotsfree} * slowscan] ]" title="ScanRate= [ [ &#92;frac{lotsfree - freeMem}{lotsfree}] * fastscan + [ &#92;frac{freeMem}{lotsfree} * slowscan] ]" class="latex" /></p>
<p>where freeMem mentions the current instance of free memory in quantity of pages. Intuitively intial values of scan rate is majorly contributed by slow scan, but as it nears the exhaustion fastscan&#8217;s value starts increasing and contributing towards scanrate.</p>
<p>CPU utilisation is interpolated with the scanrate by sporadic check  and comparison of the time taken to scan n pages ( called <a href="http://fxr.watson.org/fxr/source/common/os/vm_pageout.c?v=OPENSOLARIS;im=bigexcerpts#L134">PAGES_POLL_MASK </a>hard coded with 1023)with the utilisation.</p>
<ul>
<li>CPU utilisation is calculated as follows:</li>
</ul>
<ol>
<li>min_pageout_ticks = <img src="https://s0.wp.com/latex.php?latex=%7B%5Cfrac%7Bhz+%2A+min-percent-cpu%7D%7B100%7D%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=2&#038;c=20201002" alt="{&#92;frac{hz * min-percent-cpu}{100}}" title="{&#92;frac{hz * min-percent-cpu}{100}}" class="latex" /></li>
<li>max_pageout_tick = <img src="https://s0.wp.com/latex.php?latex=%7B%5Cfrac%7Bhz+%2A+max-percent-cpu%7D%7B100%7D%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=2&#038;c=20201002" alt="{&#92;frac{hz * max-percent-cpu}{100}}" title="{&#92;frac{hz * max-percent-cpu}{100}}" class="latex" /></li>
<li>ScalingFactor = max_pageout_tick <span style="color:#800000;"> <strong>&#8211; </strong></span> min_pageout_tick</li>
<li><a href="http://fxr.watson.org/fxr/source/common/os/vm_pageout.c?v=OPENSOLARIS;im=bigexcerpts#L579">pageout_ticks </a>= min_pageout_tick + <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7Blotsfree+-+FreeMem%7D%7Blotsfree%7D+%2A+ScalingFactor&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{lotsfree - FreeMem}{lotsfree} * ScalingFactor" title="&#92;frac{lotsfree - FreeMem}{lotsfree} * ScalingFactor" class="latex" />.</li>
</ol>
<ul>
<li>Basically the fraction of memory available with respect to lotsfree is scaled to the ScalingFactor of CPU.</li>
<li>Between lotsfree and desfree the memory is scanned 4 times/second. Once the memory reaches less than desfree its scanned 100 times/second.</li>
<li>The throttleFree watermark suspends the allocation of pages that has the wait flag set till scanner brings the memory back above minsfree.</li>
</ul>
<p><em><strong>P.S.</strong></em> The same logic is implemented in 4.3BSD, but lotsfree is <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B4%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{1}{4}" title="&#92;frac{1}{4}" class="latex" /> of total memory, desfree is <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B2%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{1}{2}" title="&#92;frac{1}{2}" class="latex" /> of lotsfree and minfree is <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B2%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{1}{2}" title="&#92;frac{1}{2}" class="latex" /> of desfree.</p>
<p><span style="color:#800000;"><strong>Implementation in FreeBSD:</strong></span></p>
<p>FreeBSD have a much simple scan policy compared to Solaris and 4.3BSD. The watermarks are replaced by a <em>minimum percent</em> of memory that needs to be maintained. If the memory reaches below this threshold then pageout daemon is started.</p>
<p><strong>Model. </strong>FreeBSD divides the pages into 5 categories of pools, namely wired, active, inactive, cache and free. Pages that are unmovable from the physical memory are named wired, pages that is currently part of active execution is called active, pages that are not part of active execution is called inactive, pages that are not used anymore are cached and pages that are not allocated is in free list.</p>
<p><strong><a href="http://fxr.watson.org/fxr/source/vm/vm_pageout.c#L1531">Policy</a>. </strong>The system has 2 thresholds, namely minimum and target thresholds. The systems goal is to maintain a minimum threshold of pages in active, cache and freelist, Once the pages reach below the minimum threshold then the pageout daemon kickstarts and starts pushing the pages back to target threshold. By default the values are:</p>
<ul>
<li><span style="color:#800000;">Free + Cache( free_target) : 3.7% and 9%</span></li>
<li><span style="color:#800000;">inactive( Inactive_target): 0% and 4.5%</span></li>
</ul>
<p>But these values are modifiable through user level interfaces.</p>
<p><strong>Procedure:</strong></p>
<ol>
<li>Pageout daemon calculates the minimum required pages that are needed to get above the threshold.</li>
<li>Tries to acquire the required pages through 3 passes.
<ol>
<li><strong>page_shortage = free_target &#8211; (free_count + cache_count)</strong>. Tries to acquire this target. If the achieved target does not satisfy the needed target, then we move to pass 2.</li>
<li><strong>page_shortage = ( free_target + inactive_target) &#8211; ( free_count + cache_count + inactive_count)</strong>. Tries to acquire this target. If the achieved target does not satisfy the needed, then we move to pass 3.</li>
<li> <strong>kickstart swap out daemon</strong>, still all memory is full, then kill the biggest memory consumed process.</li>
</ol>
</li>
<li>After the 1st pass  check the time difference between previous pass and current pass. If the difference is more than lowmem_period(10), then trigger vm_lowmem event. This event tries to decrease many other registered cache sizes and reclaims the same.</li>
</ol>
<p><span style="color:#800000;"><strong>Implementation in Linux:</strong></span></p>
<p>Linux uses watermark amalgamated with demand based scanning, i.e., on allocating a page, the watermark is tested and if the current watermark before the allocation is less than the desired, then try reclaiming the zone directly and also start kswapd if required.  The scan amount is based on user defined parameter called <a href="http://lxr.free-electrons.com/source/mm/vmscan.c?v=4.4#L142" target="_blank" rel="noopener">swappiness </a>. The reclamation policy is</p>
<p><strong>Model. </strong>The Memory( A node in <a href="https://technet.microsoft.com/en-us/library/ms178144(v=sql.105).aspx" target="_blank" rel="noopener">NUMA</a> based machines) is basically divided into <a href="http://dl.acm.org/citation.cfm?id=366256" target="_blank" rel="noopener">zones</a>. Each zone has High, Low and Min watermark. The ratio of the watermarks can be set by the  user. Scan rate is determined by variable called swappiness, default value is 60, but can also be set by user, maximum value recommended is 100.</p>
<p><figure data-shortcode="caption" id="attachment_1495" aria-describedby="caption-attachment-1495" style="width: 583px" class="wp-caption aligncenter"><img loading="lazy" data-attachment-id="1495" data-permalink="https://gokulvasanblog.wordpress.com/2016/11/14/empathising-mammoths-mentality-a-study-on-linux-memory-management/linuxscan/" data-orig-file="https://gokulvasanblog.files.wordpress.com/2016/11/linuxscan.png" data-orig-size="583,332" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="linuxscan" data-image-description="" data-medium-file="https://gokulvasanblog.files.wordpress.com/2016/11/linuxscan.png?w=300" data-large-file="https://gokulvasanblog.files.wordpress.com/2016/11/linuxscan.png?w=583" class="alignnone size-full wp-image-1495" src="https://gokulvasanblog.files.wordpress.com/2016/11/linuxscan.png" alt="LinuxScan.png" width="583" height="332" srcset="https://gokulvasanblog.files.wordpress.com/2016/11/linuxscan.png 583w, https://gokulvasanblog.files.wordpress.com/2016/11/linuxscan.png?w=150&amp;h=85 150w, https://gokulvasanblog.files.wordpress.com/2016/11/linuxscan.png?w=300&amp;h=171 300w" sizes="(max-width: 583px) 85vw, 583px" /><figcaption id="caption-attachment-1495" class="wp-caption-text">Fig2: Linux Scan Rate With Respect To Watermarks</figcaption></figure></p>
<p><strong>Policy.</strong></p>
<ol>
<li>Before allocation,  <a href="http://elixir.free-electrons.com/linux/v4.9/source/mm/page_alloc.c#L2805" target="_blank" rel="noopener">test for Min watermark</a> is made by adding the <a href="https://en.wikipedia.org/wiki/Buddy_memory_allocation" target="_blank" rel="noopener">allocation order count</a> of the request to free page count. If pages are below the low watermark and <a href="http://elixir.free-electrons.com/linux/latest/source/include/linux/gfp.h" target="_blank" rel="noopener">GFP </a>is not either set to GFP_MEMALLOC, then direct reclamation of the zone is tried with the count of SWAP_CLUSTER_MAX, provided GFP_DIRECT_RECLAIM is set for the allocation request.
<ul>
<li>If the GFP is set with GFP_KSWAPD_RECLAIM, then kswapd is triggered to reclaim MAX( SWAP_CLUSTER_MAX, high watermark).</li>
</ul>
</li>
<li>If the watermark falls below Min watermark then synchronous direct reclamation is attempted, i.e., any allocation request for pages with GFP_WAIT set is suspended on the <a href="http://elixir.free-electrons.com/linux/v4.12/source/mm/vmscan.c#L2946">wait queue</a>. Concurrently kswapd tries to bring back the pages above high watermark.</li>
<li>In both the cases reclaim uses the following mechanism to scan the pages.
<ul>
<li>The variable named <em><strong>priority</strong>  </em>scan_control<em> </em>decides on the portion of the zone to scan.
<ul>
<li>Scan_portion = <a href="http://lxr.free-electrons.com/source/include/linux/mmzone.h?v=4.4#L175">lru_type_within_zone</a>&gt;&gt; priority.</li>
</ul>
</li>
<li>Anonyomous page priority(ap) = swappiness.</li>
<li>File page priority(fp) = 200 &#8211; ap.</li>
<li>  Pressure is applied on each zone on file or anon lru formulae derived as:
<ul>
<li><img src="https://s0.wp.com/latex.php?latex=pressure+%5Cpropto+%5Cfrac%7B1%7D%7B+%5Cfrac%7BNumber+of+pages+rotated%7D%7B+Number+of+pages+scanned%7D%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=2&#038;c=20201002" alt="pressure &#92;propto &#92;frac{1}{ &#92;frac{Number of pages rotated}{ Number of pages scanned}}" title="pressure &#92;propto &#92;frac{1}{ &#92;frac{Number of pages rotated}{ Number of pages scanned}}" class="latex" />.</li>
<li><img src="https://s0.wp.com/latex.php?latex=pressure+%3D+respective+priority%28+ap+%28or%29+fp+%29+%2A+%5Cfrac%7BNumber+of+pages+scanned%7D%7BNumber+of+pages+rotated%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=2&#038;c=20201002" alt="pressure = respective priority( ap (or) fp ) * &#92;frac{Number of pages scanned}{Number of pages rotated}" title="pressure = respective priority( ap (or) fp ) * &#92;frac{Number of pages scanned}{Number of pages rotated}" class="latex" />.</li>
<li>respective pressure is either anonyomous or file page priority.</li>
</ul>
</li>
<li>Fraction per list Computation
<ul>
<li>Denominator = ap + fp .</li>
<li>Numerator = ap (or) fp.</li>
<li>Fraction to scan = <img src="https://s0.wp.com/latex.php?latex=%5Cfrac%7BNumerator%7D%7BDenominator%7D&#038;bg=ffffff&#038;fg=1a1a1a&#038;s=0&#038;c=20201002" alt="&#92;frac{Numerator}{Denominator}" title="&#92;frac{Numerator}{Denominator}" class="latex" />.</li>
</ul>
</li>
<li>Scaling: Fraction to scan is scaled to scan_portion
<ul>
<li>Scan_amount = Fraction to scan * Scan_portion.</li>
<li>Basically, scan portion is scaled to the fraction we derived.</li>
</ul>
</li>
<li>If the priority is zero and swappiness are non-zero, then Scan count is set to SCAN_EQUAL. This means the ignore the fraction calculation and directly derive the scan count based on the priority for each inactive list.</li>
</ul>
</li>
</ol>
<p>P.S. The statistical variables rotated and scanned is decomposed to half once it reaches a threshold.</p>
<p>intuitively, it is a heuristical thought that reasons with a belief that more the pages are rotated( <a href="http://www.mathcs.emory.edu/~cheung/Courses/355/Syllabus/9-virtual-mem/SC-replace.html" target="_blank" rel="noopener">see Second Chance Algorithm</a>) in a particular lru list then the possibility to reclaim pages from the same are less.  Finally, it&#8217;s worth to note that described policies are simplified to provide clarity on the core idea.</p>
<p><figure data-shortcode="caption" id="attachment_1567" aria-describedby="caption-attachment-1567" style="width: 1085px" class="wp-caption alignnone"><img loading="lazy" data-attachment-id="1567" data-permalink="https://gokulvasanblog.wordpress.com/2016/11/14/empathising-mammoths-mentality-a-study-on-linux-memory-management/completescancountalgorithm-pdf/" data-orig-file="https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png" data-orig-size="1085,937" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Detailed Explanation Of Linux Scan count determination" data-image-description="" data-medium-file="https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png?w=300" data-large-file="https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png?w=840" class="alignnone size-full wp-image-1567" src="https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png" alt="Detailed Explanation Of Linux Scan count determination" width="1085" height="937" srcset="https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png 1085w, https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png?w=150&amp;h=130 150w, https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png?w=300&amp;h=259 300w, https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png?w=768&amp;h=663 768w, https://gokulvasanblog.files.wordpress.com/2016/11/completescancountalgorithm-pdf.png?w=1024&amp;h=884 1024w" sizes="(max-width: 709px) 85vw, (max-width: 909px) 67vw, (max-width: 1362px) 62vw, 840px" /><figcaption id="caption-attachment-1567" class="wp-caption-text">Detail Description Of Linux Scan count determination.</figcaption></figure></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://0.gravatar.com/avatar/9d9f3213adef534abe85da1cff3d4596?s=49&#038;d=identicon&#038;r=G' class='avatar avatar-49' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://gokulvasanblog.wordpress.com/author/gokulvasanblog/">gokulvasanblog</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://gokulvasanblog.wordpress.com/2016/11/14/empathising-mammoths-mentality-a-study-on-linux-memory-management/" rel="bookmark"><time class="entry-date published" datetime="2016-11-14T15:22:26+00:00">November 14, 2016</time><time class="updated" datetime="2017-07-14T17:05:48+00:00">July 14, 2017</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://gokulvasanblog.wordpress.com/tag/linux/" rel="category tag">linux</a>, <a href="https://gokulvasanblog.wordpress.com/category/linux/memory-management/" rel="category tag">Memory Management</a>, <a href="https://gokulvasanblog.wordpress.com/category/linux/memory-management/scanrate/" rel="category tag">ScanRate</a></span><span class="comments-link"><a href="https://gokulvasanblog.wordpress.com/2016/11/14/empathising-mammoths-mentality-a-study-on-linux-memory-management/#comments">1 Comment<span class="screen-reader-text"> on Empathising mammoth&#8217;s mentality: A study on Linux Memory&nbsp;Management.</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-893 -->

<article id="post-494" class="post-494 post type-post status-publish format-standard hentry category-linux category-malloc">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="https://gokulvasanblog.wordpress.com/2016/08/12/understanding-malloc-part3slob/" rel="bookmark">Understanding Malloc &#8211;&nbsp;Part3(SLOB)</a></h2>	</header><!-- .entry-header -->

				<div class="entry-summary">
				<p>Implementation perspective of Simple List Of Blocks</p>
			</div><!-- .entry-summary -->
			
	
	<div class="entry-content">
		<p>This issue is continuation of previous instalment, i.e. on Simple List Of Blocks. In previous section we saw the logical perspective of SLOB, In this section we would look into the implementation perspective of SLOB.</p>
<p><strong>Data Structure.</strong> To start with, lets first derive data structure necessary to make the implementation work.Usually, the correct selection of data structure is the key to designing a good algorithm. To design for SLOB we primarily need two data structures, one is the list holding the chunks of same size and other to hold the chunk frame itself.</p>
<p><strong>The List. </strong>Each element in the list needs to be a collection holding at least two elements, namely a variable holding the size of the chunks and other holding the head of the chunk frames. The list we are intending to design could be of two kinds; contiguous and disjoint. Both has its own advantages and disadvantages; the list being contiguous saves space of holding reference to the next element, but at the same time prevents the list from further expansion. In this implementation we would design blocks as disjoint linked list and list as contiguous. This approach imitates the implementation of many real libraries.</p>
<pre class="brush: cpp; title: ; notranslate" title="">

struct list {
    unsigned int size; /// holds the size of the blocks.
    void *head;  /// head of list of blocks.
};
</pre>
<p><strong>The Blocks. </strong>When noticed from implementation perspective, the blocks are simply a list that grows and shrinks in horizontal direction, whereas the list holding blocks is represented vertically remains constant. To understand the data structure that defines the notion of blocks , its basically a collection holding a header element, data and a reference to the next element in the list, else next holds NULL. Creating this structure is quite tricky,  which we would discuss in the coming sections. For now we will just stick with the declaration of data structure.</p>
<pre class="brush: cpp; title: ; notranslate" title="">
struct block {
     struct list *lst; ///the reference to the list the block belongs.
     struct block *nxt; ///reference to nxt block in the list.
     void *block;  ///The block or payload itself.
};
</pre>
<p>The beginning of the structure holds the reference to the list to which the block belongs, this enables the return to the list( free) a constant operation, then the list holding the reference to the next block, finally the chunk itself  which would be returned to the user on malloc.</p>
<p><strong>Construction of Data structure. </strong>Before we start addressing the construction of data structure, we need to think of an approach of calling an init function before the main() function.Calling init before main() provides an abstract view of the library calls. Moreover this is the approach almost all library level implementation follows .</p>
<p>To make this work, GCC has a set of compiler directives named as <em>attributes. </em>The attributes extend the language syntax .i.e. Basically instructs the compiler of how the particular function or variable should be altered during compilation or linking phase. To define a attribute:</p>
<pre class="brush: cpp; title: ; notranslate" title="">

__attribute__((attribute_list)) &lt;function or variable&gt;.
</pre>
<p>&nbsp;</p>
<p>Of many attribute_list our area of interest is <em>constructor and destructor</em>.</p>
<p><em>From horse mouth :</em> &#8220;The <code>constructor</code> attribute causes the function to be called automatically before execution enters <code>main ()</code>. Similarly, the <code>destructor</code> attribute causes the function to be called automatically after <code>main ()</code> has completed or <code>exit ()</code> has been called&#8221;.</p>
<p>To understand the working of the mentioned attributes, let me make a confession about main(). The main is not the first function to execute when you start executing a process, rather there are many other  preparation functionalities that execute before and after main().</p>
<p>so giving a rough view of how the main looks in whole picture is</p>
<pre class="brush: cpp; title: ; notranslate" title="">
_start     // First symbol to start execution of a process
.        // stored at location 0x080482d0
.
.
call constructors
ret = main();
call destructors
.
.
copy the ret value into parent
signal parent with sigchld 

</pre>
<p>Though real implementation is much more complex, I presume this level of explanation would suffice for getting a pictorial understanding.</p>
<p>To make this work, the shared object file contains special sections (.ctors and .dtors on ELF) which contain references to the functions marked with the constructor and destructor attributes, respectively. When the library is loaded/unloaded the dynamic loader program (ld.so ) checks whether such sections exist, and if so, calls the functions referenced therein.</p>
<p>Now lets get back to our implementation on construction of data structure. Rough sketch of the implementation would be</p>
<ul>
<li>create a contiguous list, i.e. an array of list based on number of heterogeneous blocks needed by the  process.</li>
<li>For creating each set of homogeneous block,  call sbrk() with size as<em> <span style="color:#ff0000;">(sizeof(header)+ BLOCK_SIZE) * number of blocks in the set</span>.</em></li>
<li>now <strong>dissect</strong> each allocated block into  piece of chunk frames.</li>
</ul>
<p>Lets make this into a small snippet, where initialisation is done with single element on the list.</p>
<pre class="brush: cpp; title: ; notranslate" title="">

#define SLOB_LEN 1
struct list slob[SLOB_LEN];

__attribute__((constructor)) void init(void)
{
    int i = 0;
    do {
        slob[i].size = 8; /// hard coded for simplicity
        slob[i].head = make_blocks(8, 2, &amp;slob[i]);
        i++;
     } while(i &amp;lt; SLOB_LEN);
}

/*
  @ FUNCTION NAME: make_blocks
  @ DESCRIPTION: makes the blocks with given specifications
  @ INPUT: block_size: size of the block
           no_of_blks: count of the blocks
           list      : list to which the block belongs
  @ OUTPUT: returns the starting address of the blocks created
*/
void* make_blocks(const int block_size, const int no_of_blks, struct list* list)
{
    void *chnk = sbrk((block_size + sizeof(struct list)) * no_of_blks);
    int i = 0;
    struct block *blks = NULL;

    do {
        struct block *tmp = (struct block*) chnk;  //type cast chnk into header

        /* Header construction*/
        tmp-&gt;lst = list;
        tmp-&gt;nxt = blk;
        /* Block itself*/
        tmp-&gt;block = tmp + 1;
        /* prepend to the list*/
        blks = tmp;

        chnk = chnk + (sizeof(struct block) + block_size);
        i++;
    } while(i &lt; no_of_blks);
    return blks;
}
</pre>
<p>This might look little complicated on first sight but on second glance I can guarantee that its pretty straight forward.</p>
<p><strong>Malloc. </strong>This is pretty straightforward, just iterate through the list to find the  size that best suits. The SLOB is also best fit, because the list would be arranged in ascending order.</p>
<pre class="brush: cpp; title: ; notranslate" title="">
void* Malloc(const int size)
{
   int i = 0;
   void *p = NULL;
   do{
      if(slob[i].size &gt;= size) {
         if(slob[i].head) {
             p = slob[i].head-&gt;block;
             slob[i].head = slob[i].head-&gt;nxt;
         }
      }
i++;
   }while(i &lt; SLOB_LEN);
   return p;
} 

</pre>
<p>&nbsp;</p>
<p><strong>Free. </strong>The field in the struct block holding the reference to the list enables return to the list in constant time.</p>
<pre class="brush: cpp; title: ; notranslate" title="">

void free(void* blk){
   struct block *p = blk;
   p--;
   p-&gt;nxt = p-&gt;lst.head-&gt;nxt;
   p-&gt;lst.head = p;
}

</pre>
<p><strong>Conclusion.</strong></p>
<ul>
<li>To implement SLOB;  In advance we need to know the size of the blocks and count of the blocks which is somehow reducing the real dynamism.</li>
<li>SLOB is among the fastest alloc system in the series.</li>
<li>The real implementation can be found at: <a href="https://github.com/gokulvasan/SLOB--SimpleListOfBlocks.git" target="_blank">SLOB</a></li>
</ul>
<p>The next article will take us into true dynamism called Buddy system.</p>
<p><strong>References</strong></p>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Directive_(programming)." target="_blank">https://en.wikipedia.org/wiki/Directive_(programming).</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc/Attribute-Syntax.html#Attribute-Syntax" target="_blank">https://gcc.gnu.org/onlinedocs/gcc/Attribute-Syntax.html#Attribute-Syntax</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Function-Attributes.html" target="_blank">https://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Function-Attributes.html</a></li>
<li><a href="http://www.tldp.org/LDP/LG/issue84/hawk.html" target="_blank">http://www.tldp.org/LDP/LG/issue84/hawk.html </a></li>
</ol>
<p>&nbsp;</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://0.gravatar.com/avatar/9d9f3213adef534abe85da1cff3d4596?s=49&#038;d=identicon&#038;r=G' class='avatar avatar-49' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://gokulvasanblog.wordpress.com/author/gokulvasanblog/">gokulvasanblog</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://gokulvasanblog.wordpress.com/2016/08/12/understanding-malloc-part3slob/" rel="bookmark"><time class="entry-date published" datetime="2016-08-12T13:33:29+00:00">August 12, 2016</time><time class="updated" datetime="2016-08-14T05:44:05+00:00">August 14, 2016</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://gokulvasanblog.wordpress.com/tag/linux/" rel="category tag">linux</a>, <a href="https://gokulvasanblog.wordpress.com/category/malloc/" rel="category tag">malloc</a></span><span class="comments-link"><a href="https://gokulvasanblog.wordpress.com/2016/08/12/understanding-malloc-part3slob/#respond">Leave a comment<span class="screen-reader-text"> on Understanding Malloc &#8211;&nbsp;Part3(SLOB)</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-494 -->

<article id="post-213" class="post-213 post type-post status-publish format-standard hentry category-malloc tag-linux">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="https://gokulvasanblog.wordpress.com/2016/07/19/understanding-malloc-part2slob/" rel="bookmark">Understanding Malloc &#8211;&nbsp;Part2(SLOB)</a></h2>	</header><!-- .entry-header -->

				<div class="entry-summary">
				<p>Semantic version of Simple List Of Blocks.</p>
			</div><!-- .entry-summary -->
			
	
	<div class="entry-content">
		<p>The previous section helped us understand two major syscalls namely brk and sbrk. I also implemented a basic malloc technique using these syscalls and  addressed the problem on direct accessing these  syscalls, i.e. The order of Free should be exact reverse of malloc, else would lead to segmentation violation.</p>
<p>Another problem worth mentioning is, system calls are expensive due to context switch between kernel space and user space; Moreover this might also lead to unnecessary suspension of process.</p>
<p><strong>Approach to solution. </strong>To address the mentioned problems we should reduce the number of time syscall&#8217;s is made and secondly rather than reverting or contracting the data segment we should create a hole in the heap which could be reused.</p>
<p><strong>Solution. </strong>To make the above challenges  addressable we need to use a notion called <em>memory pooling</em>, i.e. pre-fetch a big chunk of memory and cut a piece from it when required. This cut piece is given back to the chunk on free function( not given back  to the Kernel, but rather pooled).</p>
<p><strong>Challenge. </strong>The mentioned solution is not straight forward; first allocation should not provide you with memory very big compared to the requested size( <em>causing Internal Fragmentation</em>) and  the time taken to process the request should be reasonable. Second the freeing of memory should happen in constant time, i.e.O(1).</p>
<p>Simplest solution that addresses the mentioned challenges is SLOB, i.e. Simple List Of Blocks. As name suggests its <span style="color:#993300;"><em>a list holding reference to &#8220;set of chunks&#8221; of same size</em></span>.The list is arranged  in ascending order based on size of the chunk it holds.To make this approach work, the memory needed for the process is approximately precomputed , prefetched and made into SLOB before <strong>main </strong>function is called.</p>
<p><img loading="lazy" data-attachment-id="312" data-permalink="https://gokulvasanblog.wordpress.com/2016/07/19/understanding-malloc-part2slob/untitled-diagram-2/" data-orig-file="https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png" data-orig-size="547,573" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Untitled Diagram" data-image-description="" data-medium-file="https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png?w=286" data-large-file="https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png?w=547" class="alignnone  wp-image-312" src="https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png" alt="Untitled Diagram.png" width="505" height="529" srcset="https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png?w=505&amp;h=529 505w, https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png?w=143&amp;h=150 143w, https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png?w=286&amp;h=300 286w, https://gokulvasanblog.files.wordpress.com/2016/07/untitled-diagram1.png 547w" sizes="(max-width: 505px) 85vw, 505px" /></p>
<p>The Above figure is a simple representation of SLOB.</p>
<p>On Malloc the list is searched for the first fit( which in SLOB is also the best fit because of its ascending property).  If the desired requested size  can be allocated, then the chunk is removed from the list and its starting address is  returned, else NULL is returned. The complexity of the fetch is O(N), where N is the length of the list, i.e. linear complexity.</p>
<p>Free just takes the starting address of the chunk and provides no other information about the size or other information about the cache( or element) to which the chunk belongs; but on free the released chunk needs to identify the desired cache to which the chunk belongs.With just starting address as parameter,it is not possible to return the chunk to the desired cache in constant time, unless the chunk holds some reference of the ownership. To make this work a notion called <strong>boundary tag </strong>is used.</p>
<p><strong>Boundary tag: </strong>Either before or after each chunk a record is added, holding the reference of the element to which the chunk belongs. This boundary tag is provided to each chunk. The total size of each chunk is <span style="color:#993300;"><em>chunk-size + boundary tag</em></span>. The size of the boundary tag is of great importance; Bigger it becomes , overhead of book keeping data becomes proportionately larger, but at the same time the size should be efficient enough to hold required data so that chunk can be returned to the respective element it belongs. Study suggests that boundary tag should not be greater than 10% of the total payload memory. To implement SLOB the size of the tag would be a word length, i.e. 32bits in case of 32bit system to hold the reference of the owned element.</p>
<p><img loading="lazy" data-attachment-id="357" data-permalink="https://gokulvasanblog.wordpress.com/2016/07/19/understanding-malloc-part2slob/boundarytag/" data-orig-file="https://gokulvasanblog.files.wordpress.com/2016/07/boundarytag.png" data-orig-size="253,203" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="BoundaryTag" data-image-description="" data-medium-file="https://gokulvasanblog.files.wordpress.com/2016/07/boundarytag.png?w=253" data-large-file="https://gokulvasanblog.files.wordpress.com/2016/07/boundarytag.png?w=253" class=" size-full wp-image-357 alignleft" src="https://gokulvasanblog.files.wordpress.com/2016/07/boundarytag.png" alt="BoundaryTag.png" width="253" height="203" srcset="https://gokulvasanblog.files.wordpress.com/2016/07/boundarytag.png 253w, https://gokulvasanblog.files.wordpress.com/2016/07/boundarytag.png?w=150&amp;h=120 150w" sizes="(max-width: 253px) 85vw, 253px" /></p>
<p>The diagram on the left is an abridged representation of the boundary tag.</p>
<p><strong>Abstraction.</strong>When malloced the address at the end of the tag is returned; therefore, the user is abstracted from underneath implementation of the allocation.</p>
<p>In many scientific publications the boundary tagging is called hidden header field.</p>
<p>when free is called  it gets end address of the boundary tag, i.e. the starting address of the  chunk. To this address when the size of the boundary tag is negated we would get the reference of the chunk&#8217;s tag. This provides us with the required information about the element to which the chunk should be returned. The complexity of the Free is O(1).</p>
<p><strong>Usage: </strong></p>
<p>This notion of SLOB is used in many RTOS that works on flat memory model. among many, One worth mentioning is OSE166&#8217;s redarrow platform. This platform was majorly used on many primitive mobile devices.</p>
<p>Another place with prominent usage is SLAB implementation in Linux kernel;  Where the kernel data structures are alloced using such an implementation, but with a slight twist; which we will discuss in much detail as we progress.</p>
<p>Many Middlewares  uses this approach to build a wrapper around the standard library to make access to memory faster.</p>
<p><strong>Conclusion.</strong>This article provided us the semantic understanding of SLOB, In the next article we would discuss a method to implement the SLOB and would also discuss the pros and cons of this algorithm.</p>
<p><strong>Definitions used in this articles:</strong></p>
<p><b>Internal fragmentation: </b> is the wasted space within each allocated block because of rounding up from the actual requested allocation to the allocation granularity<em><strong>.</strong></em></p>
<p><b>Flat memory model</b> or <b>linear memory model</b> refers to a memory addressing paradigm in which &#8220;memory appears to the program as a single contiguous address space.&#8221;The CPU can directly (and linearly) address all of the available memory locations without having to resort to any sort of memory segmentation or paging schemes.</p>
<p><em><strong>References and further study:</strong></em></p>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Big_O_notation#Big_Omega_notation">https://en.wikipedia.org/wiki/Big_O_notation#Big_Omega_notation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fragmentation_(computing)">https://en.wikipedia.org/wiki/Fragmentation_(computing)</a></li>
<li><a href="https://en.wikipedia.org/wiki/SLOB">https://en.wikipedia.org/wiki/SLOB</a></li>
<li><a href="https://en.wikipedia.org/wiki/Flat_memory_model">https://en.wikipedia.org/wiki/Flat_memory_model</a></li>
</ol>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://0.gravatar.com/avatar/9d9f3213adef534abe85da1cff3d4596?s=49&#038;d=identicon&#038;r=G' class='avatar avatar-49' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://gokulvasanblog.wordpress.com/author/gokulvasanblog/">gokulvasanblog</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://gokulvasanblog.wordpress.com/2016/07/19/understanding-malloc-part2slob/" rel="bookmark"><time class="entry-date published" datetime="2016-07-19T21:09:00+00:00">July 19, 2016</time><time class="updated" datetime="2016-07-23T17:53:31+00:00">July 23, 2016</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://gokulvasanblog.wordpress.com/category/malloc/" rel="category tag">malloc</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="https://gokulvasanblog.wordpress.com/tag/linux/" rel="tag">linux</a></span><span class="comments-link"><a href="https://gokulvasanblog.wordpress.com/2016/07/19/understanding-malloc-part2slob/#respond">Leave a comment<span class="screen-reader-text"> on Understanding Malloc &#8211;&nbsp;Part2(SLOB)</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-213 -->

<article id="post-16" class="post-16 post type-post status-publish format-standard hentry category-malloc tag-dyanmic-allocation tag-linux">
	<header class="entry-header">
		
		<h2 class="entry-title"><a href="https://gokulvasanblog.wordpress.com/2016/07/11/understanding-malloc-part1/" rel="bookmark">Understanding Malloc-Part1</a></h2>	</header><!-- .entry-header -->

				<div class="entry-summary">
				<p>A series of articles that tries to provide understanding on Dynamic allocation and related algorithms. </p>
			</div><!-- .entry-summary -->
			
	
	<div class="entry-content">
		<p>The Word Dynamism in memory has always been a fascinating area to understand. For many beginner level programmers, the allocation of dynamic memory using library calls like malloc have been a magic like complex implementation.</p>
<p>This series of articles tries to provide a profound insight on how the dynamic allocation works. The article starts with very basic implementation and walks towards an advanced version which is currently used in large servers, embedded devices and general purpose operating systems.</p>
<p>The whole article uses Linux as the basis to explain the dynamic allocation.</p>
<p>To start with,  let&#8217;s try to understand the need for such a dynamic mechanism; Assume user has to enter an input for a programme, which in turn is just a reference to a file holding variable length data, but the length is not known in advance. This scenario  could be effectively handled with dynamic allocation, else programmer have to pre compute maximum needed data length and statically allocate them. This static allocation leads to unnecessary blow up of programme size. Other scenarios like reading data from sensors whose lifetime is short lived; but the length of the data produced is not known in advance would be justified efficiently with dynamic allocation.</p>
<p>Lets now start with a very basic implementation of  dynamic allocation .</p>
<pre class="brush: cpp; title: ; notranslate" title="">

#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt; // unix standard library

/*
 * @size: size needs to be allocated
 * return: starting address of
 *         allocated memory else NULL
*/
void *Malloc(unsigned int size)
{
     int *tmp;
     if(size &lt;= 0)
        return NULL;
     tmp = sbrk(size);
     if(tmp &gt; 0)
        return tmp;
     else
        return NULL;
}

/*
 * @addr: starting addressed that needs to be freed
 */
void Free(void *addr)
{
   brk(addr);
} 

int main()
{
    int *p = NULL; 

    p = Malloc(sizeof(*p));
    *p = 7568;
    printf(&quot;Value in the pointer is %d\n&quot;, *p);
    Free(p); 

    return 0;
}
</pre>
<p>If the above snippet is noticed two different syscalls are used namely <strong>brk</strong> and <strong>sbrk. </strong>To understand the intuitiveness of these syscalls we would first skew through different memory segments of a basic C programme in unix like systems.</p>
<p><img class="editor-featured-image__preview-image" src="https://gokulvasanblog.files.wordpress.com/2016/07/diagram11.png?w=450" /></p>
<p>The above-mentioned diagram is a simplified view of segmentation in Unix like systems. To brief on the segments: stack holds the automatic variables, Text holds the code of the executing process, followed by data segment which in turn holds initialized data, uninitialized data and heap. The role of the data segment is to hold global variables.In which uninitialized data segment holds variables that are not initialized by user, the Initialised segment contains data that is initialised by the user  and Finally heap is the segment that provides dynamic memory during execution. The end of the data segment is named <strong>break </strong>which can be incremented and decremented as per the requirement.</p>
<p>Coming back to syscalls.</p>
<p><strong>brk:</strong>  Gets an address as a parameter and sets the data segment to the corresponding address. On Success returns 0, else -1 and sets errno to indicate error.</p>
<p><strong>sbrk: </strong>Gets size  as parameter and increments or decrements the data segment to the desired size and returns the  previous break address of the segment. If <i>incr</i> is negative, the amount of allocated space is decreased by <i>incr</i> bytes. <i>sbrk</i>(0) returns the current value of the break.</p>
<p><img class="editor-featured-image__preview-image alignleft" src="https://gokulvasanblog.files.wordpress.com/2016/07/sbrk.png?w=450" /></p>
<p>To understand sbrk more intuitively,  lets assume a programme that allocates memory using the above mentioned Malloc for a size of int. With the figure on left as a reference, <strong>old break </strong>is the boundary of the data segment before sbrk is applied and <strong>new break</strong> is the boundary after sbrk is applied, so sbrk returns <strong>old break</strong> address <em>( P.S. The figure is just much simplified version of segment heap within data segment )</em>.</p>
<p>Now, its pretty straight forward to understand the above code snippet on basic malloc and free library functions. Malloc gets the size as argument and internally uses <strong>sbrk</strong> to increment the size of heap and returns old break address.  free gets the address and resets the data segment to the given address.</p>
<p><em><strong>Problem.</strong></em>The above snippet would work only when the sequence of<strong> free is exactly the reverse order of malloc allocation</strong>. If done any other way would generate SIGSEGV leading to segmentation violation.</p>
<p>To understand this problem lets extend only the main function as</p>
<pre class="brush: cpp; title: ; notranslate" title="">

int main()
{
   int *p = NULL;
   int *q = NULL;

   p = Malloc(sizeof(*p));
   *p = 7568;
   q = Malloc(sizeof(*q));
   *q = 5525;
   Free(p); // free p before q
   printf(&quot;in the pointer is %d\n&quot;, *q);
   Free(q); 

    return 0;
}

</pre>
<p><img class="editor-featured-image__preview-image alignright" src="https://gokulvasanblog.files.wordpress.com/2016/07/free.png?w=450" /></p>
<p>The above snippet will produce segmentation violation when variable &#8220;q&#8221; is tried to print( though it is programmatically right ). This behavior is as per the definition of brk, which in this scenario <strong>will revert the break to the</strong> <strong>starting of variable &#8220;p&#8221;, </strong>but <span style="line-height:1.7;">variable &#8220;q&#8221; is placed after variable &#8220;p&#8221;, which now falls into an unmapped segment,  generating SIGSEGV when &#8220;q&#8221; is tried to access.</span></p>
<p>But, as per the definition of dynamic allocation the order of malloc and free does not matter.</p>
<p>We will address the mentioned problem in next section by adding another layer around the syscalls called SLOB( <strong>S</strong>imple <strong>L</strong>ist <strong>O</strong>f <strong>B</strong>locks ). This will take us a step closer to understanding practical libraries like uCLibC, GLibC&#8230;</p>
<p><em><strong> Some definitions for better understanding:</strong></em></p>
<p><strong>syscalls: </strong> a <b>system call</b> is a programmatic way in which a computer program requests a service from the kernel of the operating system it is executed on</p>
<p><strong>Segments or Segmentation:</strong> <b>Memory segmentation</b> is the division of a computer&#8217;s primary memory into <b>segments</b> or <b>sections</b>.  This notion provides a modular approach for loader along with a layer of protection. The segmentation also enables the operating system to provide a defined behavior. For Example, Segmentation Violation is one such example enabling OS to prevent user program corrupting other segments or programs.</p>
<p><em><strong>References and further study:</strong></em></p>
<p>[1] .<a href="http://www.bravegnu.org/gnu-eprog/c-startup.html"> http://www.bravegnu.org/gnu-eprog/c-startup.html</a></p>
<p>[2]. <a href="https://en.wikipedia.org/wiki/Data_segment">https://en.wikipedia.org/wiki/Data_segment</a></p>
<p>[3]. <a href="http://linux.die.net/man/2/sbrk">http://linux.die.net/man/2/sbrk</a></p>
<p>[4]. <a href="https://en.wikipedia.org/wiki/Memory_segmentation">https://en.wikipedia.org/wiki/Memory_segmentation</a></p>
<p>[5]. <a href="https://en.wikipedia.org/wiki/System_call">https://en.wikipedia.org/wiki/System_call</a></p>
<p>&nbsp;</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><span class="author vcard"><img alt='' src='https://0.gravatar.com/avatar/9d9f3213adef534abe85da1cff3d4596?s=49&#038;d=identicon&#038;r=G' class='avatar avatar-49' height='49' width='49' /><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://gokulvasanblog.wordpress.com/author/gokulvasanblog/">gokulvasanblog</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://gokulvasanblog.wordpress.com/2016/07/11/understanding-malloc-part1/" rel="bookmark"><time class="entry-date published" datetime="2016-07-11T20:56:17+00:00">July 11, 2016</time><time class="updated" datetime="2017-09-02T09:31:46+00:00">September 2, 2017</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://gokulvasanblog.wordpress.com/category/malloc/" rel="category tag">malloc</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="https://gokulvasanblog.wordpress.com/tag/dyanmic-allocation/" rel="tag">Dyanmic Allocation</a>, <a href="https://gokulvasanblog.wordpress.com/tag/linux/" rel="tag">linux</a></span><span class="comments-link"><a href="https://gokulvasanblog.wordpress.com/2016/07/11/understanding-malloc-part1/#comments">1 Comment<span class="screen-reader-text"> on Understanding Malloc-Part1</span></a></span>			</footer><!-- .entry-footer -->
</article><!-- #post-16 -->

		</main><!-- .site-main -->
	</div><!-- .content-area -->


	<aside id="secondary" class="sidebar widget-area" role="complementary">
		<section id="search-1" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://gokulvasanblog.wordpress.com/">
	<label>
		<span class="screen-reader-text">Search for:</span>
		<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
	</label>
	<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</section>			<div id="atatags-286348-602b905959cac"></div>
			
			<script>
				__ATA.cmd.push(function() {
					__ATA.initDynamicSlot({
						id: 'atatags-286348-602b905959cac',
						location: 140,
						formFactor: '003',
						label: {
							text: 'Advertisements',
						},
						creative: {
							reportAd: {
								text: 'Report this ad',
							},
							privacySettings: {
								text: 'Privacy',
								
							}
						}
					});
				});
			</script>	</aside><!-- .sidebar .widget-area -->

		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo">
							<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">
					<div class="menu-primary-container"><ul id="menu-primary-1" class="primary-menu"><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-8"><a href="/" aria-current="page">Home</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9"><a href="https://gokulvasanblog.wordpress.com/about/">About</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10"><a href="https://gokulvasanblog.wordpress.com/contact/">Contact</a></li>
</ul></div>				</nav><!-- .main-navigation -->
			
							<nav class="social-navigation" role="navigation" aria-label="Footer Social Links Menu">
					<div class="menu-social-links-container"><ul id="menu-social-links-1" class="social-links-menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11"><a href="https://twitter.com/"><span class="screen-reader-text">Twitter</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12"><a href="https://www.facebook.com/"><span class="screen-reader-text">Facebook</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13"><a href="http://plus.google.com"><span class="screen-reader-text">Google+</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14"><a href="http://github.com"><span class="screen-reader-text">GitHub</span></a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15"><a href="http://wordpress.com"><span class="screen-reader-text">WordPress.com</span></a></li>
</ul></div>				</nav><!-- .social-navigation -->
			
			<div class="site-info">
								<span class="site-title"><a href="https://gokulvasanblog.wordpress.com/" rel="home">gokulvasanblog</a></span>
								<a href="https://wordpress.com/?ref=footer_blog" rel="nofollow">Blog at WordPress.com.</a>
			</div><!-- .site-info -->
		</footer><!-- .site-footer -->
	</div><!-- .site-inner -->
</div><!-- .site -->

<!--  -->
<script src='//0.gravatar.com/js/gprofiles.js?ver=202107y' id='grofiles-cards-js'></script>
<script id='wpgroho-js-extra'>
var WPGroHo = {"my_hash":""};
</script>
<script type='text/javascript' src='https://s0.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1610363240h'></script>

	<script>
		// Initialize and attach hovercards to all gravatars
		( function() {
			function init() {
				if ( typeof Gravatar === 'undefined' ) {
					return;
				}

				if ( typeof Gravatar.init !== 'function' ) {
					return;
				}

				Gravatar.profile_cb = function ( hash, id ) {
					WPGroHo.syncProfileData( hash, id );
				};

				Gravatar.my_hash = WPGroHo.my_hash;
				Gravatar.init( 'body', '#wp-admin-bar-my-account' );
			}

			if ( document.readyState !== 'loading' ) {
				init();
			} else {
				document.addEventListener( 'DOMContentLoaded', init );
			}
		} )();
	</script>

		<div style="display:none">
	<div class="grofile-hash-map-9d9f3213adef534abe85da1cff3d4596">
	</div>
	<div class="grofile-hash-map-55deea8a6060dc1c65fbdbd2adecd187">
	</div>
	</div>
<script id='highlander-comments-js-extra'>
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"https:\/\/gokulvasanblog.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/gokulvasanblog.wordpress.com\/wp-login.php?action=logout&_wpnonce=f4c56311b8","homeURL":"https:\/\/gokulvasanblog.wordpress.com\/","postID":"1523","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"0","userIsLoggedIn":"","isJetpack":"","text_direction":"ltr"};
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??/wp-content/js/jquery/jquery.autoresize.js,/wp-content/mu-plugins/highlander-comments/script.js?m=1573483029j'></script>
		<!-- CCPA [start] -->
		<script type="text/javascript">
			( function () {

				var setupPrivacy = function() {

					document.addEventListener( 'DOMContentLoaded', function() {

						// Minimal Mozilla Cookie library
						// https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie/Simple_document.cookie_framework
						var cookieLib = window.cookieLib = {getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,o,n,t,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}return"rootDomain"!==r&&".rootDomain"!==r||(r=(".rootDomain"===r?".":"")+document.location.hostname.split(".").slice(-2).join(".")),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(o)+c+(r?"; domain="+r:"")+(t?"; path="+t:"")+(i?"; secure":""),!0}};

						var setDefaultOptInCookie = function() {
							var value = '1YNN';
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'usprivacy', value, 365 * 24 * 60 * 60, '/', domain );
						};

						var setCcpaAppliesCookie = function( value ) {
							var domain = '.wordpress.com' === location.hostname.slice( -14 ) ? '.rootDomain' : location.hostname;
							cookieLib.setItem( 'ccpa_applies', value, 24 * 60 * 60, '/', domain );
						}

						var maybeCallDoNotSellCallback = function() {
							if ( 'function' === typeof window.doNotSellCallback ) {
								return window.doNotSellCallback();
							}

							return false;
						}

						var usprivacyCookie = cookieLib.getItem( 'usprivacy' );

						if ( null !== usprivacyCookie ) {
							maybeCallDoNotSellCallback();
							return;
						}

						var ccpaCookie = cookieLib.getItem( 'ccpa_applies' );

						if ( null === ccpaCookie ) {

							var request = new XMLHttpRequest();
							request.open( 'GET', 'https://public-api.wordpress.com/geo/', true );

							request.onreadystatechange = function () {
								if ( 4 === this.readyState ) {
									if ( 200 === this.status ) {

										var data = JSON.parse( this.response );
										var ccpa_applies = data['region'] && data['region'].toLowerCase() === 'california';

										setCcpaAppliesCookie( ccpa_applies );

										if ( ccpa_applies ) {
											if ( maybeCallDoNotSellCallback() ) {
												setDefaultOptInCookie();
											}
										}
									} else {
										setCcpaAppliesCookie( true );
										if ( maybeCallDoNotSellCallback() ) {
											setDefaultOptInCookie();
										}
									}
								}
							};

							request.send();
						} else {
							if ( ccpaCookie === 'true' ) {
								if ( maybeCallDoNotSellCallback() ) {
									setDefaultOptInCookie();
								}
							}
						}
					} );
				};

				if ( window.defQueue && defQueue.isLOHP && defQueue.isLOHP === 2020 ) {
					defQueue.items.push( setupPrivacy );
				} else {
					setupPrivacy();
				}

			} )();
		</script>

		<!-- CCPA [end] -->
					<script type="text/javascript">
			( function( $ ) {
				$( document.body ).on( 'post-load', function () {
					if ( typeof __ATA.insertInlineAds === 'function' ) {
						__ATA.insertInlineAds();
					}
				} );
			} )( jQuery );
			</script>
<script>
window.addEventListener( "load", function( event ) {
	var link = document.createElement( "link" );
	link.href = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.css?v=20201002";
	link.type = "text/css";
	link.rel = "stylesheet";
	document.head.appendChild( link );

	var script = document.createElement( "script" );
	script.src = "https://s0.wp.com/wp-content/mu-plugins/actionbar/actionbar.js?v=20201002";
	script.defer = true;
	document.body.appendChild( script );
} );
</script>

	
	<div id="carousel-reblog-box">
		<form action="#" name="carousel-reblog">
			<label for="carousel-reblog-content" id="carousel-reblog-lblogcontent" class="screen-reader-text">Add your thoughts here... (optional)</label>
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" placeholder="Add your thoughts here... (optional)"></textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="#" class="cancel">Cancel</a></span>
				<input type="submit" name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post" />
				<input type="hidden" id="carousel-reblog-blog-id" value="113716065" />
				<input type="hidden" id="carousel-reblog-blog-url" value="https://gokulvasanblog.wordpress.com" />
				<input type="hidden" id="carousel-reblog-blog-title" value="gokulvasanblog" />
				<input type="hidden" id="carousel-reblog-post-url" value="" />
				<input type="hidden" id="carousel-reblog-post-title" value="" />
			</div>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="c06c911923" /><input type="hidden" name="_wp_http_referer" value="/" />		</form>

		<div class="arrow"></div>
	</div>
<div class="widget widget_eu_cookie_law_widget">
<div
	class="hide-on-button ads-active"
	data-hide-timeout="30"
	data-consent-expiration="180"
	id="eu-cookie-law"
>
	<form method="post">
		<input type="submit" value="Close and accept" class="accept" />

		Privacy &amp; Cookies: This site uses cookies. By continuing to use this website, you agree to their use. <br />
To find out more, including how to control cookies, see here:
				<a href="https://automattic.com/cookies" rel="nofollow">
			Cookie Policy		</a>
 </form>
</div>
</div><script type='text/javascript' src='https://s0.wp.com/_static/??-eJzTLy/QTc7PK0nNK9EvyClNz8wr1i+uzCtJrMjITM/IAeKS1CJMEWP94uSizIISoOIM5/yiVL2sYh19yo1yKioFmldQADTOPtfW0NTcwMjAxNLCNAsAjwQ/qQ=='></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.head.appendChild( corecss );
		var themecssurl = "https://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?m=1363304414h&amp;ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.head.appendChild( themecss );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();

	// Infinite scroll support
	if ( typeof( jQuery ) !== 'undefined' ) {
		jQuery( function( $ ) {
			$( document.body ).on( 'post-load', function() {
				SyntaxHighlighter.highlight();
			} );
		} );
	}
</script>
<link rel='stylesheet' id='all-css-0-3' href='https://s0.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel.css?m=1592560282h&cssminify=yes' type='text/css' media='all' />
<script id='twentysixteen-script-js-extra'>
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
</script>
<script id='jetpack-carousel-js-extra'>
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"https:\/\/gokulvasanblog.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"8f68e20775","display_exif":"1","display_comments":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","copyright":"Copyright","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/gokulvasanblog.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fgokulvasanblog.wordpress.com%2F2016%2F11%2F14%2Fempathising-mammoths-mentality-a-study-on-linux-memory-management%2F","blog_id":"113716065","meta_data":["camera","aperture","shutter_speed","focal_length","copyright"],"local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=113716065&v=wpcom&tz=0&user_id=0&subd=gokulvasanblog","is_public":"1","reblog_enabled":""};
</script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVjcsOgkAMRX/IWpFEw8L4LcNQsDCv0I7g3zsuTAwLEnc35/b04pLAxqAUFEfBjp5sKa3HUQ74U+mDPAmm3KIuBbyEVyUKH0cmTuA4TNBHmwV6/kvvc7DKMchW8hmSywMHwYW7gVSQcmnjxATOLKjkkzNKG77zx3SeA7RmRm9EaS4JdDZ22hu3Zo5ZyOFImsotfEFx7v5WXapz01xPdT2+AY66fLw='></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="//stats.wp.com/w.js?61" defer></script> <script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'113716065','blog_tz':'0','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'113716065','v':'wpcom','tz':'0','user_id':'0','subd':'gokulvasanblog'}]);
_stq.push(['extra', {'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWFnNncxc1tjZG9XVXhRU1I2fH5qamxuMVppeW14OXhyViZzN3B1YllDQlpJd3FrV0xYbz81LUlBaFVdNi5dandZb2V2bE9TeVYmVnhJWWRIZGxQWnM2cGc1d2RTbU5SYm5bbFJyWlM2MmJ1cW8tVWNNVl8rdW9DbWRCeXZfeWt6YytBM3lFNDhTVDJPLV9PcDhuWjhaTmhFYVFdcHkzakxPV20xfjl0SkgxdTdRLU5RTFpkeD9QaEdZRXRyZVBEb2lbTXJCVUZkZDlsYjR5TUFBLFExRDJhcGZmTG0='}]);
_stq.push([ 'clickTrackerInit', '113716065', '0' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:1px;width:1px;overflow:hidden;position:absolute;bottom:1px;" alt="" /></noscript>
		<script type="text/javascript">
		window._tkq = window._tkq || [];
		window.wpNativeRailcar = {"railcar":"@L@$^V^m8)%h","fetch_algo":"native-ads-poc-v1","fetch_position":1,"rec_blog_id":3584907,"rec_post_id":43607,"rec_result":"https:\/\/gokulvasanblog.wordpress.com","rec_url":"http:\/\/en.blog.wordpress.com\/2020\/10\/30\/learn-from-the-experts-create-a-successful-blog-with-our-brand-new-course\/"};
		window.wpNativeId = Math.random().toString(36).substr(2, 8);
		window.wpNativeRailcar.unique = wpNativeId;
		window._tkq.push( [ 'recordEvent', 'wpcom_native_ad_traintracks_render', window.wpNativeRailcar ] );
		</script><script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>
